"""add cloud provider support

Revision ID: 116ca7bd2c96
Revises: 3d06b0a8828f
Create Date: 2021-04-09 09:14:20.881885

"""
import sqlalchemy as sa
from alembic import op


# revision identifiers, used by Alembic.
revision = "116ca7bd2c96"
down_revision = "3d06b0a8828f"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column("hosts", sa.Column("provider_type", sa.String(length=50), nullable=True))
    # ### end Alembic commands ###

    op.create_index("idxproviderid", "hosts", [sa.text("(canonical_facts ->> 'provider_id')")])


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column("hosts", "provider_type")
    # ### end Alembic commands ###

    op.drop_index("idxproviderid", table_name="hosts")
