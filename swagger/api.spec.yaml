---
openapi: 3.0.0
info:
  description: REST interface for the Insights Platform Host Inventory application.
  version: 1.0.0
  title: Insights Host Inventory REST Interface
paths:
  /hosts:
    get:
      operationId: api.host.get_host_list
      tags:
        - hosts
      summary: Read the entire list of hosts
      description: >-
        Read the entire list of all hosts available to the account.
        <br /><br />
        Required permissions: inventory:hosts:read
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/displayName'
        - $ref: '#/components/parameters/fqdn'
        - $ref: '#/components/parameters/hostnameOrId'
        - $ref: '#/components/parameters/insightsId'
        - $ref: '#/components/parameters/providerId'
        - $ref: '#/components/parameters/providerType'
        - $ref: '#/components/parameters/updatedStart'
        - $ref: '#/components/parameters/updatedEnd'
        - $ref: '#/components/parameters/groupNameListParam'
        - $ref: '#/components/parameters/branchId'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/hostOrderByParam'
        - $ref: '#/components/parameters/hostOrderHowParam'
        - $ref: '#/components/parameters/stalenessParam'
        - $ref: '#/components/parameters/tagsParam'
        - $ref: '#/components/parameters/registered_with'
        - $ref: '#/components/parameters/filter_param'
        - $ref: '#/components/parameters/fields_param'
      responses:
        '200':
          description: Successfully read the hosts list.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HostQueryOutput'
    delete:
      operationId: api.host.delete_hosts_by_filter
      tags:
        - hosts
      summary: Delete the entire list of hosts filtered by the given parameters
      description: >-
        Delete the entire list of hosts filtered by the given parameters.
        <br /><br />
        Required permissions: inventory:hosts:write
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/displayName'
        - $ref: '#/components/parameters/fqdn'
        - $ref: '#/components/parameters/hostnameOrId'
        - $ref: '#/components/parameters/insightsId'
        - $ref: '#/components/parameters/providerId'
        - $ref: '#/components/parameters/providerType'
        - $ref: '#/components/parameters/updatedStart'
        - $ref: '#/components/parameters/updatedEnd'
        - $ref: '#/components/parameters/groupNameListParam'
        - $ref: '#/components/parameters/registered_with'
        - $ref: '#/components/parameters/stalenessNoDefaultsParam'
        - $ref: '#/components/parameters/tagsParam'
        - $ref: '#/components/parameters/filter_param'
      responses:
        '202':
          description: Request for deletion of filtered hosts has been accepted.
        '400':
          description: Invalid request.
  /hosts/all:
    delete:
      operationId: api.host.delete_all_hosts
      tags:
        - hosts
      summary: Delete all hosts on the account
      description: >-
        Delete all hosts on the account.  The request must include "confirm_delete_all=true".
        <br /><br />
        Required permissions: inventory:hosts:write
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/confirmDeleteAll'
      responses:
        '202':
          description: Request for deleting all hosts has been accepted.
        '400':
          description: Invalid request.
  /hosts/checkin:
    post:
      operationId: api.host.host_checkin
      tags:
        - hosts
      summary: Update staleness timestamps for a host matching the provided facts
      description: >-
        Finds a host and updates its staleness timestamps.
        It uses the supplied canonical facts to determine which host to update.
        By default, the staleness timestamp is set to 1 hour from when the request is received;
        however, this can be overridden by supplying the interval.
        <br /><br />
        Required permissions: inventory:hosts:write
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
      requestBody:
        description: Data required to create a check-in record for a host.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCheckIn'
      responses:
        '201':
          description: Successfully checked in Host.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HostOut'
        '404':
          description: Not Found.
  '/hosts/{host_id_list}':
    get:
      tags:
        - hosts
      summary: Find hosts by their IDs
      description: >-
        Find one or more hosts by their ID.
        <br /><br />
        Required permissions: inventory:hosts:read
      operationId: api.host.get_host_by_id
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/hostIdList'
        - $ref: '#/components/parameters/branchId'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/hostOrderByParam'
        - $ref: '#/components/parameters/hostOrderHowParam'
        - $ref: '#/components/parameters/fields_param'
      responses:
        '200':
          description: Successfully searched for hosts.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HostQueryOutput'
        '400':
          description: Invalid request.
        '404':
          description: Host not found.
    delete:
      tags:
        - hosts
      summary: Delete hosts by IDs
      description: >-
        Delete hosts by IDs
        <br /><br />
        Required permissions: inventory:hosts:write
      operationId: api.host.delete_host_by_id
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/hostIdList'
        - $ref: '#/components/parameters/branchId'
      responses:
        '200':
          description: Successfully deleted hosts.
        '400':
          description: Invalid request.
        '404':
          description: Host not found.
    patch:
      tags:
        - hosts
      summary: Update hosts
      description: >-
        Update hosts
        <br /><br />
        Required permissions: inventory:hosts:write
      operationId: api.host.patch_host_by_id
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/hostIdList'
        - $ref: '#/components/parameters/branchId'
      requestBody:
        description: A group of fields to be updated on the hosts
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchHostIn'
      responses:
        '200':
          description: Successfully updated the hosts.
        '400':
          description: Invalid request.
        '404':
          description: Host not found.
  '/hosts/{host_id_list}/facts/{namespace}':
    patch:
      tags:
        - hosts
      summary: Merge facts under a namespace
      description: >-
        Merge one or multiple hosts facts under a namespace.
        <br /><br />
        Required permissions: inventory:hosts:write
      operationId: api.host.merge_facts
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/hostIdList'
        - $ref: '#/components/parameters/factsNamespace'
        - $ref: '#/components/parameters/branchId'
      requestBody:
        description: A dictionary with the new facts to merge with the original ones.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Facts'
      responses:
        '200':
          description: Successfully merged facts.
        '400':
          description: Invalid request.
        '404':
          description: Host or namespace not found.
    put:
      tags:
        - hosts
      summary: Replace facts under a namespace
      description: >-
        Replace facts under a namespace
        <br /><br />
        Required permissions: inventory:hosts:write
      security:
        - ApiKeyAuth: []
      operationId: api.host.replace_facts
      parameters:
        - $ref: '#/components/parameters/hostIdList'
        - $ref: '#/components/parameters/factsNamespace'
        - $ref: '#/components/parameters/branchId'
      requestBody:
        description: A dictionary with the new facts to replace the original ones.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Facts'
      responses:
        '200':
          description: Successfully replaced facts.
        '400':
          description: Invalid request.
        '404':
          description: Host or namespace not found.
  '/hosts/{host_id_list}/system_profile':
    get:
      tags:
        - hosts
      summary: Return one or more hosts system profile
      description: >-
        Find one or more hosts by their ID and return the id and system profile
        <br /><br />
        Required permissions: inventory:hosts:read
      operationId: api.host.get_host_system_profile_by_id
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/hostIdList'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/hostOrderByParam'
        - $ref: '#/components/parameters/hostOrderHowParam'
        - $ref: '#/components/parameters/branchId'
        - $ref: '#/components/parameters/fields_param'
      responses:
        '200':
          description: Successfully searched for hosts.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemProfileByHostOut'
        '400':
          description: Invalid request.
        '404':
          description: Host not found.
  '/hosts/{host_id_list}/tags':
    get:
      tags:
        - hosts
      summary: Get the tags on a host
      description: >-
        Get the tags on a host
        <br /><br />
        Required permissions: inventory:hosts:read
      operationId: api.host.get_host_tags
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/hostIdList'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/hostOrderByParam'
        - $ref: '#/components/parameters/hostOrderHowParam'
        - $ref: '#/components/parameters/searchParam'
      responses:
        '200':
          description: Successfully found tags.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagsOut'
        '400':
          description: Invalid request.
  '/hosts/{host_id_list}/tags/count':
    get:
      tags:
        - hosts
      summary: Get the number of tags on a host or hosts
      description: >-
        Get the number of tags on a host or hosts
        <br /><br />
        Required permissions: inventory:hosts:read
      operationId: api.host.get_host_tag_count
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/hostIdList'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/hostOrderByParam'
        - $ref: '#/components/parameters/hostOrderHowParam'
      responses:
        '200':
          description: Successfully found tag count.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagCountOut'
        '400':
          description: Invalid request.
  /groups:
    get:
      operationId: api.group.get_group_list
      tags:
        - groups
      summary: Read the entire list of groups [Not Implemented]
      description: >-
        Read the entire list of all groups available to the account. [Not Implemented]
        <br /><br />
        Required permissions: inventory:groups:read
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/groupName'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/groupOrderByParam'
        - $ref: '#/components/parameters/groupOrderHowParam'
      responses:
        '200':
          description: Successfully read the groups list.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupQueryOutput'
    post:
      operationId: api.group.create_group
      tags:
        - groups
      summary: Create a new group matching the provided name and list of hosts IDs [Not Implemented]
      description: >-
        Creates a new group containing the hosts associated with the host IDs provided. [Not Implemented]
        <br /><br />
        Required permissions: inventory:groups:write
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
      requestBody:
        description: Data required to create a record for a group.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupIn'
      responses:
        '201':
          description: Successfully created new Group.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupOutWithHostCount'
  '/groups/{group_id}':
    patch:
      operationId: api.group.patch_group_by_id
      tags:
        - groups
      summary: Merge group information [Not Implemented]
      description: >-
        Merge group information. [Not Implemented]
        <br /><br />
        Required permissions: inventory:groups:write
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/groupId'
      requestBody:
        description: A dictionary with new information to merge with the original group.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupIn'
      responses:
        '200':
          description: Successfully merged group information.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupOutWithHostCount'
        '400':
          description: Invalid request.
        '404':
          description: Group not found.
  '/groups/{group_id_list}':
    get:
      operationId: api.group.get_groups_by_id
      tags:
        - groups
      summary: Find groups by their IDs [Not Implemented]
      description: >-
        Find one or more groups by their IDs. [Not Implemented]
        <br /><br />
        Required permissions: inventory:groups:read
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/groupIdList'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/groupOrderByParam'
        - $ref: '#/components/parameters/groupOrderHowParam'
      responses:
        '200':
          description: Successfully searched for groups.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupQueryOutput'
        '400':
          description: Invalid request.
        '404':
          description: Groups not found.
    delete:
      operationId: api.group.delete_groups
      tags:
        - groups
      summary: Delete a list of groups [Not Implemented]
      description: >-
        Delete a list of groups. [Not Implemented]
        <br /><br />
        Required permissions: inventory:groups:write
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/groupIdList'
      responses:
        '204':
          description: The groups were successfully deleted.
        '400':
          description: Invalid request.
  '/groups/{group_id}/hosts/{host_id_list}':
    delete:
      operationId: api.host_group.delete_hosts_from_group
      tags:
        - groups
      summary: Delete one or more hosts from a group [Not Implemented]
      description: >-
        Delete one or more hosts from a group. [Not Implemented]
        <br /><br />
        Required permissions: inventory:groups:write
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/groupId'
        - $ref: '#/components/parameters/hostIdList'
      responses:
        '204':
          description: Successfully deleted hosts.
        '400':
          description: Invalid request.
  '/groups/{group_id}/hosts':
    post:
      operationId: api.host_group.add_host_list_to_group
      tags:
        - groups
      summary: Add host IDs to the provided group
      description: >-
        Adds the host list in the request body to the provided group.
        <br /><br />
        Required permissions: inventory:groups:write
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/groupId'
      requestBody:
        description: A list of hosts IDs to associate with the provided group.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HostIds'
      responses:
        '200':
          description: Successfully associated hosts with group.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupOutWithHostCount'
        '400':
          description: Invalid request.
        '404':
          description: Group not found.

  /resource-types:
    get:
      operationId: api.resource_type.get_resource_type_list
      tags:
        - resource-types
      summary: Get the list of resource types
      description: >-
        Returns the list of available RBAC resource types.
        <br /><br />
        Required permissions: rbac:*:*
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/resourceTypesPerPageParam'
        - $ref: '#/components/parameters/pageParam'
      responses:
        '200':
          description: Successfully read the resource types list.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceTypesQueryOutput'
  /resource-types/inventory-groups:
    get:
      operationId: api.resource_type.get_resource_type_groups_list
      tags:
        - resource-types
      summary: Get the list of inventory groups in resource-types format
      description: >-
        Returns the list of groups in the current account.
        <br /><br />
        Required permissions: rbac:*:*
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/groupName'
        - $ref: '#/components/parameters/resourceTypesPerPageParam'
        - $ref: '#/components/parameters/pageParam'
      responses:
        '200':
          description: Successfully read the resource-types groups list.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceTypesGroupsQueryOutput'

  /tags:
    get:
      tags:
        - tags
      summary: Get the active host tags for a given account
      description: >-
        Required permissions: inventory:hosts:read
      operationId: api.tag.get_tags
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/tagsParam'
        - $ref: '#/components/parameters/tagsOrderBy'
        - $ref: '#/components/parameters/tagsOrderHow'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/stalenessParam'
        - $ref: '#/components/parameters/searchParam'
        - $ref: '#/components/parameters/displayName'
        - $ref: '#/components/parameters/fqdn'
        - $ref: '#/components/parameters/hostnameOrId'
        - $ref: '#/components/parameters/insightsId'
        - $ref: '#/components/parameters/providerId'
        - $ref: '#/components/parameters/providerType'
        - $ref: '#/components/parameters/updatedStart'
        - $ref: '#/components/parameters/updatedEnd'
        - $ref: '#/components/parameters/groupNameListParam'
        - $ref: '#/components/parameters/registered_with'
        - $ref: '#/components/parameters/filter_param'
      responses:
        '200':
            description: Tags
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ActiveTags'
        '400':
            description: Invalid request.
        '404':
          $ref: '#/components/responses/PageOutOfBounds'

  /system_profile/sap_system:
    get:
      tags:
        - system_profile
      summary: get all sap system values and counts on the account
      description: >-
        Required permissions: inventory:hosts:read
      operationId: api.system_profile.get_sap_system
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/tagsParam'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/stalenessParam'
        - $ref: '#/components/parameters/registered_with'
        - $ref: '#/components/parameters/filter_param'
      responses:
        '200':
            description: sap_system values and counts for the account
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/SystemProfileSapSystemOut'
        '400':
            description: Invalid request.
        '404':
          $ref: '#/components/responses/PageOutOfBounds'

  /system_profile/sap_sids:
    get:
      tags:
        - system_profile
      summary: get all sap sids values and counts on the account
      description: >-
        Required permissions: inventory:hosts:read
      operationId: api.system_profile.get_sap_sids
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/searchParam'
        - $ref: '#/components/parameters/tagsParam'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/stalenessParam'
        - $ref: '#/components/parameters/registered_with'
        - $ref: '#/components/parameters/filter_param'
      responses:
        '200':
            description: sap_system values and counts for the account
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/SystemProfileSapSystemOut'
        '400':
            description: Invalid request.
        '404':
          $ref: '#/components/responses/PageOutOfBounds'

  /system_profile/operating_system:
    get:
      tags:
        - system_profile
      summary: get all operating system versions and counts on the account
      description: >-
        Required permissions: inventory:hosts:read
      operationId: api.system_profile.get_operating_system
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/tagsParam'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/stalenessParam'
        - $ref: '#/components/parameters/registered_with'
        - $ref: '#/components/parameters/filter_param'
      responses:
        '200':
            description: operating system versions and counts on the account
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/SystemProfileOperatingSystemOut'
        '400':
            description: Invalid request.
        '404':
          $ref: '#/components/responses/PageOutOfBounds'

  /system_profile/validate_schema:
    post:
      tags:
        - system_profile
      summary: validate system profile schema
      description: >-
        Validates System Profile data from recent Kafka messages against a given spec,
        and compares it with the current one. Only HBI Admins can access this endpoint.
      operationId: api.system_profile.validate_schema
      security:
        - ApiKeyAuth: []
      parameters:
        - in: query
          name: repo_fork
          schema:
            type: string
          description: The fork of the inventory-schemas repo to use
        - in: query
          name: repo_branch
          schema:
            type: string
          description: The branch of the inventory-schemas repo to use
          required: true
        - in: query
          name: days
          schema:
            type: integer
            minimum: 1
          description: How many days worth of data to validate
        - in: query
          name: max_messages
          schema:
            type: integer
            minimum: 1
            default: 10000
          description: Stops polling when this number of messages has been collected
      responses:
        '200':
            description: Host validation results
        '403':
            description: Forbidden

  /account/staleness:
    get:
      operationId: api.account_staleness.get_staleness
      tags:
        - accounts_staleness
      summary: Read the entire list of account staleness
      description: >-
        Read the entire list of all accounts staleness available.
        Required permissions: inventory:TODO:read
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
      responses:
        '200':
          description: Successfully read the staleness account.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountStalenessOutput'
    post:
      operationId: api.account_staleness.create_staleness
      tags:
        - accounts_staleness
      summary: Create account staleness record
      description: >-
        Create account staleness record.
        Required permissions: inventory:TODO:write
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
      requestBody:
        description: Data required to create a record for a account staleness.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountStalenessIn'
      responses:
        '201':
          description: Successfully account staleness created.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountStalenessOutput'
    patch:
      operationId: api.account_staleness.update_staleness
      tags:
        - accounts_staleness
      summary: Update account staleness record
      description: >-
        Update account staleness record.
        Required permissions: inventory:TODO:write
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
      responses:
        '200':
          description: Successfully account staleness updated.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountStalenessOutput'
    delete:
      operationId: api.account_staleness.delete_staleness
      tags:
        - accounts_staleness
      summary: Delete an account staleness
      description: >-
        Delete an account staleness
        <br /><br />
        Required permissions: inventory:staleness:write
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
      responses:
        '204':
          description: Successfully deleted account staleness.
        '400':
          description: Invalid request.
        '404':
          description: Account Staleness not found.

  /account/staleness/reset:
    patch:
      operationId: api.account_staleness.reset_staleness
      tags:
        - accounts_staleness
      summary: Reset account staleness
      description: >-
        Reset account staleness record.
        Required permissions: inventory:TODO:read
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
      responses:
        '200':
          description: Successfully reset account staleness.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountStalenessOutput'

  '/unleash/inventory_groups_toggle':
    get:
      tags:
        - unleash
      summary: Check whether the Groups feature is enabled
      description: Returns the value of the hbi.api.inventory-groups toggle, if able to be retrieved.
      operationId: api.unleash.get_inventory_groups_toggle
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: The value of the Inventory Groups toggle
          content:
              application/json:
                schema:
                  $ref: '#/components/schemas/UnleashToggleOut'
  /assignment-rules:
    get:
      operationId: api.assignment_rule.get_assignment_rules_list
      tags:
        - groups
      summary: Read the entire list of assignment-rules [Not Implemented]
      description: >-
        Read the entire list of all assignment-rules available to the account. [Not Implemented]
        Required permissions: inventory:groups:read
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/assignmentRuleName'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/assignmentRuleOrderByParam'
        - $ref: '#/components/parameters/assignmentRuleOrderHowParam'
      responses:
        '200':
          description: Successfully read the assignment-rules list.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AssignmentRuleQueryOutput'
    post:
      operationId: api.assignment_rule.create_assignment_rule
      tags:
        - groups
      summary: Create Assignment Rule object
      description: >-
        Create Assignment Rule object using post request
        <br /><br />
        Required permissions: inventory:groups:write
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
      requestBody:
        description: Data required to create Assignment Rule object
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignmentRuleIn'
      responses:
        '201':
          description: Assignment Rule created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AssignmentRuleOut'
  '/assignment-rules/{assignment_rule_id_list}':
    get:
      operationId: api.assignment_rule.get_assignment_rules_by_id
      tags:
        - groups
      summary: Find assignment rules by their IDs
      description: >-
        Find one or more assignment rules by their IDs.
        <br /><br />
        Required permissions: inventory:groups:read
      security:
        - ApiKeyAuth: []
      parameters:
        - $ref: '#/components/parameters/assignmentRuleIdList'
        - $ref: '#/components/parameters/perPageParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/assignmentRuleOrderByParam'
        - $ref: '#/components/parameters/assignmentRuleOrderHowParam'
      responses:
        '200':
          description: Successfully searched for assignment rules.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AssignmentRuleQueryOutput'
        '400':
          description: Invalid request.
        '404':
          description: Assignment rules not found.
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      x-bearerInfoFunc: app.auth.bearer_token_handler
    ApiKeyAuth:
      type: apiKey
      in: header
      name: x-rh-identity
      description: >-
        Base64-encoded JSON identity header provided by 3Scale. Contains an
        org_id of the user issuing the request. Format of the JSON:
        {"identity": {"org_id": "12345678"}}
      x-apikeyInfoFunc: app.auth.authentication_header_handler
  parameters:
    pageParam:
      $ref: 'pagination.yaml#/components/parameters/pageParam'
    perPageParam:
      $ref: 'pagination.yaml#/components/parameters/perPageParam'
    resourceTypesPerPageParam:
      $ref: 'pagination.yaml#/components/parameters/resourceTypesPerPageParam'
    hostId:
      in: path
      name: host_id
      description: Host (system) ID.
      required: true
      schema:
        $ref: '#/components/schemas/NonStrictUUID'
    hostIdList:
      in: path
      name: host_id_list
      description: A comma-separated list of host IDs.
      required: true
      schema:
        type: array
        items:
          $ref: '#/components/schemas/NonStrictUUID'
    branchId:
      in: query
      name: branch_id
      schema:
        type: string
      description: Filter by branch_id
      required: false
    displayName:
      in: query
      name: display_name
      schema:
        type: string
      description: Filter by display_name (case-insensitive)
      required: false
    fqdn:
      in: query
      name: fqdn
      schema:
        type: string
      description: Filter by FQDN (case-insensitive)
      required: false
    hostnameOrId:
      in: query
      name: hostname_or_id
      schema:
        type: string
      description: Filter by display_name, fqdn, id (case-insensitive)
      required: false
    insightsId:
      in: query
      name: insights_id
      schema:
        type: string
        format: uuid
      description: Filter by insights_id
      required: false
    providerId:
      in: query
      name: provider_id
      schema:
        type: string
      description: Filter by provider_id
      required: false
    providerType:
      in: query
      name: provider_type
      schema:
        type: string
        enum:
          - alibaba
          - aws
          - azure
          - gcp
          - ibm
      description: Filter by provider_type
      required: false
    updatedStart:
      in: query
      name: updated_start
      schema:
        type: string
        format: date-time
      description: Only show hosts last modified after the given date
    updatedEnd:
      in: query
      name: updated_end
      schema:
        type: string
        format: date-time
      description: Only show hosts last modified before the given date
    factsNamespace:
      in: path
      name: namespace
      description: A namespace of the merged facts.
      required: true
      schema:
        type: string
    hostOrderByParam:
      name: order_by
      in: query
      required: false
      schema:
        type: string
        enum:
          - display_name
          - group_name
          - updated
          - operating_system
      description: Ordering field name
    groupOrderByParam:
      name: order_by
      in: query
      required: false
      schema:
        type: string
        enum:
          - name
          - host_count
      description: Ordering field name
    hostOrderHowParam:
      name: order_how
      in: query
      required: false
      schema:
        type: string
        enum:
          - ASC
          - DESC
      description: >-
        Direction of the ordering; defaults to ASC for display_name, and to DESC
        for updated and operating_system
    groupOrderHowParam:
      name: order_how
      in: query
      required: false
      schema:
        type: string
        enum:
          - ASC
          - DESC
      description: >-
        Direction of the ordering; defaults to ASC for name, and to DESC
        for host_count
    assignmentRuleOrderByParam:
      name: order_by
      in: query
      required: false
      schema:
        type: string
        enum:
          - org_id
          - account
          - name
          - group_id
      description: Ordering field name
    assignmentRuleOrderHowParam:
      name: order_how
      in: query
      required: false
      schema:
        type: string
        enum:
          - ASC
          - DESC
      description: >-
        Direction of the ordering; defaults to ASC for name, and to DESC
        for host_ids
    stalenessParam:
      name: staleness
      in: query
      required: false
      schema:
        type: array
        items:
          type: string
          enum:
            - fresh
            - stale
            - stale_warning
            - unknown
        default:
          - fresh
          - stale
          - stale_warning
          - unknown
      description: "Culling states of the hosts. Default: fresh,stale,unknown"
    stalenessNoDefaultsParam:
      name: staleness
      in: query
      required: false
      schema:
        type: array
        items:
          type: string
          enum:
            - fresh
            - stale
            - stale_warning
            - unknown
      description: "Culling states of the hosts."
    tagsParam:
      name: tags
      in: query
      description: filters out hosts not tagged by the given tags
      required: false
      schema:
        type: array
        items:
          type: string
          pattern: '^([^=/]+/)?[^=/]+(=[^=/]+)?$'
    tagsOrderBy:
      in: query
      name: order_by
      required: false
      schema:
        type: string
        default: tag
        enum:
          - tag
          - count
      description: Ordering field name
    tagsOrderHow:
      in: query
      name: order_how
      required: false
      schema:
        type: string
        default: ASC
        enum:
          - ASC
          - DESC
      description: Direction of the ordering. Default to ASC
    searchParam:
      in: query
      name: search
      required: false
      description: Used for searching tags and sap_sids that match the given search string. For searching tags, a tag's namespace, key, and/or value is used for matching.
      schema:
        type: string
    registered_with:
      in: query
      name: registered_with
      required: false
      description: Filters out any host not registered by the specified reporters
      schema:
        type: array
        items:
          type: string
          enum:
            - insights
            - yupana
            - puptoo
            - rhsm-conduit
            - cloud-connector
            - "!yupana"
            - "!puptoo"
            - "!rhsm-conduit"
            - "!cloud-connector"
    filter_param:
      in: query
      name: filter
      required: false
      description: Filters hosts based on system_profile fields
      style: deepObject
      explode: true
      schema:
        $ref:  '#/components/schemas/SystemProfileNestedObject'
    fields_param:
      in: query
      name: fields
      required: false
      description: Fetches only mentioned system_profile fields
      style: deepObject
      explode: true
      x-validator: sparseFields
      schema:
        $ref:  '#/components/schemas/SystemProfileNestedObject'
    confirmDeleteAll:
      in: query
      name: confirm_delete_all
      schema:
        type: boolean
      description: Confirmation to delete all hosts on the account
      required: false
    groupName:
      in: query
      name: name
      schema:
        type: string
      description: Filter by group name
      required: false
    groupNameListParam:
      in: query
      name: group_name
      description: Filter by group name
      required: false
      schema:
        type: array
        items:
          type: string
    groupId:
      in: path
      name: group_id
      description: Group ID.
      required: true
      schema:
        $ref: '#/components/schemas/NonStrictUUID'
    assignmentRuleName:
      in: query
      name: name
      schema:
        type: string
      description: Filter by assignment-rule name
      required: false
    assignmentRuleId:
      in: path
      name: assignment_rule_id
      description: assignment-rule ID.
      required: true
      schema:
        $ref: '#/components/schemas/NonStrictUUID'
    groupIdList:
      in: path
      name: group_id_list
      description: A comma-separated list of group IDs.
      required: true
      schema:
        type: array
        items:
          $ref: '#/components/schemas/NonStrictUUID'
    assignmentRuleIdList:
      in: path
      name: assignment_rule_id_list
      description: A comma-separated list of assignment-rule IDs.
      required: true
      schema:
        type: array
        items:
          $ref: '#/components/schemas/NonStrictUUID'

  schemas:
    SystemProfileOperatingSystemOut:
      properties:
        total:
          $ref: '#/components/schemas/Total'
        count:
          $ref: '#/components/schemas/Count'
        results:
          description: The list of operating_system values on the account
          type: array
          items:
            type: object
            properties:
              value:
                type: object
                properties:
                  name:
                    type: string
                  major:
                    type: integer
                    nullable: true
                  minor:
                    type: integer
                    nullable: true
              count:
                type: integer

    SystemProfileSapSystemOut:
      type: object
      properties:
        total:
          $ref: '#/components/schemas/Total'
        count:
          $ref: '#/components/schemas/Count'
        results:
          description: The list of sap_system values on the account
          type: array
          items:
            type: object
            properties:
              value:
                oneOf:
                - type: string
                - type: boolean
              count:
                type: integer

    TagsOut:
      allOf:
      - $ref: '#/components/schemas/PaginationOut'
      - type: object
        properties:
          results:
            description: The list of tags on the systems
            type: object
            additionalProperties:
              type: array
              items:
                $ref: '#/components/schemas/StructuredTag'
    StructuredTag:
      type: object
      properties:
        namespace:
          type: string
          nullable: true
        key:
          type: string
        value:
          type: string
          nullable: true
    TagCountOut:
      allOf:
      - $ref: '#/components/schemas/PaginationOut'
      - type: object
        properties:
          results:
            description: The list of tags on the systems
            type: object
            additionalProperties:
              type: integer
    Facts:
      title: Host facts
      description: A set of string facts about a host.
      type: object
      example:
        fact1: value1
        fact2: value2
    FactSet:
      title: Host facts under a namespace
      description: A set of string facts belonging to a single namespace.
      properties:
        namespace:
          type: string
          minLength: 1
          description: A namespace the facts belong to.
        facts:
          type: object
          description: The facts themselves.
          example:
            fact1: value1
            fact2: value2
      required:
        - namespace
        - facts
    NonNullableString:
      type: string
      nullable: false
    NonNullableStringArray:
      type: array
      items:
        type: string
      nullable: false
    HyphenatedUuid:
      type: string
      nullable: true
      pattern: '[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}'
      minLength: 36
      maxLength: 36
      example: 22cd8e39-13bb-4d02-8316-84b850dc5136
    InsightsId:
      description: >-
        An ID defined in /etc/insights-client/machine-id. This field is
        considered a canonical fact.
      type: string
      nullable: true
      example: 3f01b55457674041b75e41829bcee1dc
    SubscriptionManagerId:
      description: >-
        A Red Hat Subcription Manager ID of a RHEL host.  This field is
        considered to be a canonical fact.
      type: string
      nullable: true
      example: 22cd8e39-13bb-4d02-8316-84b850dc5136
    SatelliteId:
      description: >-
        A Red Hat Satellite ID of a RHEL host.  This field is considered to
        be a canonical fact.
      type: string
      nullable: true
      example: 22cd8e39-13bb-4d02-8316-84b850dc5136
    BiosUuid:
      description: >-
        A UUID of the host machine BIOS.  This field is considered to be a
        canonical fact.
      type: string
      nullable: true
      example: 22cd8e39-13bb-4d02-8316-84b850dc5136
    IpAddresses:
      description: >-
        Host’s network IP addresses.  This field is considered to be a
        canonical fact.
      type: array
      nullable: true
      items:
        type: string
      example:
      - 10.10.0.1
      - 10.0.0.2
    Fqdn:
      description: >-
        A host’s Fully Qualified Domain Name.  This field is considered to
        be a canonical fact.
      type: string
      nullable: true
      example: my.host.example.com
    MacAddresses:
      description: >-
        Host’s network interfaces MAC addresses.  This field is considered
        to be a canonical fact.
      type: array
      nullable: true
      items:
        type: string
      example:
      - 'c2:00:d0:c8:61:01'
    ProviderId:
      description: >-
        Host’s reference in the external source e.g. Alibaba, AWS EC2, Azure,
        GCP, IBM etc. This field is one of the canonical facts and does not
        work without provider_type.
      type: string
      nullable: true
      example: i-05d2313e6b9a42b16
    ProviderType:
      description: >-
        Type of external source e.g. Alibaba, AWS EC2, Azure, GCP, IBM, etc.
        This field is one of the canonical facts and does not workout provider_id.
      type: string
      nullable: true
      example: aws
    AccountNumber:
      description: A Red Hat Account number that owns the host.
      type: string
      nullable: true
      example: '000102'
      deprecated: true
    OrgId:
      description: The Org ID of the tenant that owns the host.
      type: string
      example: '000102'
    CanonicalFactsIn:
      allOf:
      - properties:
          insights_id:
            allOf:
            - $ref: "#/components/schemas/InsightsId"
            - $ref: "#/components/schemas/HyphenatedUuid"
          subscription_manager_id:
            allOf:
            - $ref: "#/components/schemas/SubscriptionManagerId"
            - $ref: "#/components/schemas/HyphenatedUuid"
          satellite_id:
            allOf:
            - $ref: "#/components/schemas/SatelliteId"
            - $ref: "#/components/schemas/HyphenatedUuid"
          bios_uuid:
            allOf:
            - $ref: "#/components/schemas/BiosUuid"
            - $ref: "#/components/schemas/HyphenatedUuid"
          ip_addresses:
            $ref: "#/components/schemas/NonNullableStringArray"
          fqdn:
            $ref: "#/components/schemas/NonNullableString"
          mac_addresses:
            $ref: "#/components/schemas/NonNullableStringArray"
          provider_id:
            $ref: "#/components/schemas/NonNullableString"
          provider_type:
            $ref: "#/components/schemas/NonNullableString"
      - anyOf:
        - required:
          - insights_id
        - required:
          - subscription_manager_id
        - required:
          - satellite_id
        - required:
          - bios_uuid
        - required:
          - ip_addresses
        - required:
          - fqdn
        - required:
          - mac_addresses
        - required:
          - provider_id
          - provider_type
    CanonicalFactsOut:
      type: object
      properties:
        insights_id:
          $ref: "#/components/schemas/InsightsId"
        subscription_manager_id:
          $ref: "#/components/schemas/SubscriptionManagerId"
        satellite_id:
          $ref: "#/components/schemas/SatelliteId"
        bios_uuid:
          $ref: "#/components/schemas/BiosUuid"
        ip_addresses:
          $ref: "#/components/schemas/IpAddresses"
        fqdn:
          $ref: "#/components/schemas/Fqdn"
        mac_addresses:
          $ref: "#/components/schemas/MacAddresses"
        provider_id:
          $ref: "#/components/schemas/ProviderId"
        provider_type:
          $ref: "#/components/schemas/ProviderType"
    CreateCheckIn:
      title: Check-in data
      description: >-
        Data required to create a check-in record for a host.
      type: object
      allOf:
        - $ref: '#/components/schemas/CanonicalFactsIn'
        - properties:
            checkin_frequency:
              description: How long from now to expect another check-in (in minutes).
              type: integer
              minimum: 1
              maximum: 2880
              example: 1440
    HostOut:
      title: Host Out
      description: >-
        Data of a single host belonging to an account. Represents the hosts
        without its Inventory metadata.
      type: object
      allOf:
        - $ref: '#/components/schemas/CanonicalFactsOut'
        - properties:
            display_name:
              description: >-
                A host’s human-readable display name, e.g. in a form of a domain
                name.
              type: string
              example: host1.mydomain.com
              nullable: true
            ansible_host:
              description: >-
                The ansible host name for remediations
              type: string
              example: host1.mydomain.com
              nullable: true
            account:
              $ref: "#/components/schemas/AccountNumber"
            org_id:
              $ref: "#/components/schemas/OrgId"
            id:
              description: >-
                A durable and reliable platform-wide host identifier. Applications
                should use this identifier to reference hosts.
              type: string
              example: 3f01b55457674041b75e41829bcee1dc
            created:
              description: A timestamp when the entry was created.
              type: string
              format: date-time
            updated:
              description: A timestamp when the entry was last updated.
              type: string
              format: date-time
            facts:
              description: A set of facts belonging to the host.
              type: array
              items:
                $ref: '#/components/schemas/FactSet'
            stale_timestamp:
              description: Timestamp from which the host is considered stale.
              type: string
              format: date-time
              nullable: true
            stale_warning_timestamp:
              description: >-
                Timestamp from which the host is considered too stale to be listed without an explicit
                toggle.
              type: string
              format: date-time
              nullable: true
            culled_timestamp:
              description: Timestamp from which the host is considered deleted.
              type: string
              format: date-time
              nullable: true
            reporter:
              description: Reporting source of the host. Used when updating the stale_timestamp.
              type: string
              nullable: true
            per_reporter_staleness:
              description: >-
                Reporting source of the last checkin status, stale_timestamp, and last_check_in.
              type: object
              additionalProperties:
                $ref: '#/components/schemas/PerReporterStaleness'
            groups:
              description: >-
                The groups that the host belongs to, if any.
              type: array
              items:
                $ref: '#/components/schemas/GroupOut'
          required:
            - org_id
    HostQueryOutput:
      title: A Host Inventory query result
      description: >-
        A paginated host search query result with host entries and their
        Inventory metadata.
      allOf:
      - $ref: '#/components/schemas/PaginationOut'
      - type: object
        required:
          - results
        properties:
          results:
            description: Actual host search query result entries.
            type: array
            items:
              $ref: '#/components/schemas/HostOut'
    SystemProfileByHostOut:
      title: A host system profile query result
      description: Structure of the output of the host system profile query
      allOf:
      - $ref: '#/components/schemas/PaginationOut'
      - type: object
        required:
          - results
        properties:
          results:
            description: Actual host search query result entries.
            type: array
            items:
              $ref: '#/components/schemas/HostSystemProfileOut'
    HostSystemProfileOut:
      title: Structure of an individual host system profile output
      description: Individual host record that contains only the host id and system profile
      type: object
      properties:
        id:
          type: string
        system_profile:
          $ref: '#/components/schemas/SystemProfile'
    PatchHostIn:
      title: Host data
      description: >-
        Data of a single host to be updated.
      type: object
      properties:
        ansible_host:
          description: >-
            The ansible host name for remediations
          type: string
          example: host1.mydomain.com
        display_name:
          description: >-
            A host’s human-readable display name, e.g. in a form of a domain
            name.
          type: string
          example: host1.mydomain.com
    PerReporterStaleness:
      type: object
      properties:
        last_check_in:
          type: string
          format: date-time
          example: '2020-02-10T08:07:03.354307+00:00'
        stale_timestamp:
          type: string
          format: date-time
          example: '2020-02-17T08:07:03.354307+00:00'
        check_in_succeeded:
          type: boolean
    ActiveTags:
      title: Host data
      allOf:
      - $ref: '#/components/schemas/PaginationOut'
      - type: object
        required:
          - results
        properties:
          results:
            type: array
            items:
              title: ActiveTag
              description: Information about a host tag
              type: object
              required:
                - tag
                - count
              properties:
                tag:
                  $ref: '#/components/schemas/StructuredTag'
                count:
                  description: The number of hosts with the given tag. If the value is null this indicates that the count is unknown.
                  type: integer
                  nullable: true
      example:
        total: 3
        count: 3
        page: 1
        per_page: 50
        results:
          - tag:
              namespace: Sat
              key: env
              value: prod
            count: 3
          - tag:
              namespace: aws
              key: region
              value: us-east-1
            count: 1
          - tag:
              namespace: insights-client
              key: web
              value: null
            count: -1
    GroupName:
      description: >-
        A group’s human-readable name.
      type: string
      nullable: false
      example: sre-group
    NonStrictUUID:
      type: string
      pattern: ^[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}$|^[0-9a-fA-F]{8}[0-9a-fA-F]{4}[0-9a-fA-F]{4}[0-9a-fA-F]{4}[0-9a-fA-F]{12}$
      format: uuid
      example: bA6deCFc19564430AB814bf8F70E8cEf
    GroupId:
      description: >-
        A durable and reliable platform-wide group identifier. Applications
        should use this identifier to reference groups.
      $ref: '#/components/schemas/NonStrictUUID'
    AssignmentRuleId:
      description: >-
        A durable and reliable platform-wide assignment-rule identifier. Applications
        should use this identifier to reference assignment-rules.
      $ref: '#/components/schemas/NonStrictUUID'
    HostId:
      description: >-
        A durable and reliable platform-wide group identifier. Applications
        should use this identifier to reference hosts.
      $ref: '#/components/schemas/NonStrictUUID'
    HostIds:
      description: A comma-separated list of host IDs that belong to the group.
      type: array
      nullable: true
      items:
        $ref: '#/components/schemas/NonStrictUUID'
    AccountStalenessId:
      description: Account Staleness UID
      $ref: '#/components/schemas/NonStrictUUID'

    HostCount:
      description: The number of hosts associated with the group.
      type: integer
      example: 3
    UnleashToggleOut:
      title: Unleash Toggle Out
      properties:
        flag_value:
          description: The value of the feature flag toggle
          type: boolean
        using_fallback_value:
          description: Whether the fallback value was used, if the Unleash server could not be accessed
          type: boolean
    GroupIn:
      title: Group In
      description: >-
        Data of a single group belonging to an account.
      type: object
      allOf:
        - properties:
            name:
              $ref: "#/components/schemas/GroupName"
            host_ids:
              $ref: "#/components/schemas/HostIds"
    AssignmentRuleIn:
      title: Assignment Rule In
      description: >-
        Data for a single Assignment Rule
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
          maxLength: 255
          nullable: true
        group_id:
          $ref: "#/components/schemas/GroupId"
        filter:
          type: object
        enabled:
          type: boolean
      required:
        - name
        - group_id
        - filter
        - enabled
    AssignmentRuleOut:
      title: Assignment Rule response
      description: >-
        Data for a single Assignment Rule response
      type: object
      properties:
        id:
          $ref: '#/components/schemas/NonStrictUUID'
        org_id:
          $ref: '#/components/schemas/OrgId'
        account:
          $ref: '#/components/schemas/AccountNumber'
        name:
          type: string
          minLength: 1
        description:
          type: string
          minLength: 1
          nullable: true
        group_id:
          $ref: "#/components/schemas/GroupId"
        filter:
          type: object
        enabled:
          type: boolean
        created_on:
          type: string
          format: date-time
        modified_on:
          type: string
          format: date-time
      required:
        - name
        - group_id
        - filter
        - enabled
        - created_on
        - modified_on
    GroupOutWithHostCount:
      title: Group properties with host count
      description: >-
        Data of a single group belonging to an account.
      type: object
      allOf:
      - $ref: "#/components/schemas/GroupOut"
      - properties:
          host_count:
            $ref: "#/components/schemas/HostCount"
    GroupOut:
      title: Group Out Properties
      description: >-
        Data of a single group belonging to an account.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/GroupId"
        name:
          $ref: "#/components/schemas/GroupName"
        account:
          $ref: "#/components/schemas/AccountNumber"
        org_id:
          $ref: "#/components/schemas/OrgId"
        created:
          description: A timestamp when the entry was created.
          type: string
          format: date-time
        updated:
          description: A timestamp when the entry was last updated.
          type: string
          format: date-time
    GroupQueryOutput:
      title: An Inventory Groups query result
      description: >-
        A paginated group search query result with group entries and their
        Inventory metadata.
      type: object
      allOf:
      - $ref: '#/components/schemas/PaginationOut'
      - type: object
        required:
          - results
        properties:
          results:
            description: Actual group search query result entries.
            type: array
            items:
              $ref: '#/components/schemas/GroupOutWithHostCount'
    AssignmentRuleQueryOutput:
      title: An Inventory Assignment Rules query result
      description: >-
        A paginated assignment-rule search query result with assignment-rule entries and their
        Inventory metadata.
      type: object
      allOf:
      - $ref: '#/components/schemas/PaginationOut'
      - type: object
        required:
          - results
        properties:
          results:
            description: Actual assignment-rule search query result entries.
            type: array
            items:
              $ref: '#/components/schemas/AssignmentRuleOut'
    ResourceTypesOut:
      title: A resource type query result
      description: >-
        Data describing a single resource-types RBAC object.
      type: object
      properties:
        value:
          description: The name of the resource type
          type: string
        path:
          description: The path for the RBAC endpoint for the resource type
          type: string
        count:
          type: integer
    ResourceTypesQueryOutput:
      title: A resource-types query result
      description: >-
        A paginated list of resource-types RBAC objects.
      type: object
      allOf:
      - $ref: '#/components/schemas/ResourceTypesPaginationOut'
      - type: object
        required:
          - data
        properties:
          data:
            description: Actual resource-types object data.
            type: array
            items:
              $ref: '#/components/schemas/ResourceTypesOut'
    ResourceTypesGroupsQueryOutput:
      title: An Inventory Groups query result in resource-types response format
      description: >-
        A paginated group search query result with group entries and their
        Inventory metadata in paginated resource-types response format.
      type: object
      allOf:
      - $ref: '#/components/schemas/ResourceTypesPaginationOut'
      - type: object
        required:
          - data
        properties:
          data:
            description: Actual group search query result entries.
            type: array
            items:
              $ref: '#/components/schemas/GroupOutWithHostCount'
    AccountStalenessIn:
      title: Account Staleness In
      description: >-
        Data of a single account staleness.
      type: object
      anyOf:
        - properties:
            conventional_staleness_delta:
              type: string
              maxLength: 36
            conventional_stale_warning_delta:
              type: string
              maxLength: 36
            conventional_culling_delta:
              type: string
              maxLength: 36
            immutable_staleness_delta:
              type: string
              maxLength: 36
            immutable_stale_warning_delta:
              type: string
              maxLength: 36
            immutable_culling_delta:
              type: string
              maxLength: 36
    AccountStalenessOutput:
      title: Account Staleness Out
      description: >-
        Data of a account staleness.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/AccountStalenessId"
        account:
          $ref: "#/components/schemas/AccountNumber"
        org_id:
          $ref: "#/components/schemas/OrgId"
        conventional_staleness_delta:
          type: string
          maxLength: 36
        conventional_stale_warning_delta:
          type: string
          maxLength: 36
        conventional_culling_delta:
          type: string
          maxLength: 36
        immutable_staleness_delta:
          type: string
          maxLength: 36
        immutable_stale_warning_delta:
          type: string
          maxLength: 36
        immutable_culling_delta:
          type: string
          maxLength: 36
        created_at:
          description: A timestamp when the entry was created.
          type: string
          format: date-time
        updated_at:
          description: A timestamp when the entry was last updated.
          type: string
          format: date-time

    # include renames for system_profile
    SystemProfile:
      $ref: 'system_profile.spec.yaml#/$defs/SystemProfile'
    SystemProfileNestedObject:
      $ref: 'system_profile.spec.yaml#/$defs/NestedObject'
    SystemProfileDiskDevice:
      $ref: 'system_profile.spec.yaml#/$defs/DiskDevice'
    SystemProfileYumRepo:
      $ref: 'system_profile.spec.yaml#/$defs/YumRepo'
    SystemProfileDnfModule:
      $ref: 'system_profile.spec.yaml#/$defs/DnfModule'
    SystemProfileInstalledProduct:
      $ref: 'system_profile.spec.yaml#/$defs/InstalledProduct'
    SystemProfileNetworkInterface:
      $ref: 'system_profile.spec.yaml#/$defs/NetworkInterface'


    # include renames for pagination
    PaginationOut:
      $ref: 'pagination.yaml#/components/schemas/PaginationOut'
    Total:
      $ref: 'pagination.yaml#/components/schemas/Total'
    Count:
      $ref: 'pagination.yaml#/components/schemas/Count'
    Page:
      $ref: 'pagination.yaml#/components/schemas/Page'
    PerPage:
      $ref: 'pagination.yaml#/components/schemas/PerPage'
    ResourceTypesPaginationOut:
      $ref: 'pagination.yaml#/components/schemas/ResourceTypesPaginationOut'


  responses:
    PageOutOfBounds:
      description: Requested page is outside of the range of available pages
